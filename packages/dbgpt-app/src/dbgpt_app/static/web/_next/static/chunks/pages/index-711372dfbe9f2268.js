(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(57464)}])},48218:function(e,t,a){"use strict";var l=a(85893),n=a(82353),c=a(16165),s=a(67294);t.Z=e=>{let{width:t,height:a,scene:o}=e,r=(0,s.useCallback)(()=>{switch(o){case"chat_knowledge":return n.je;case"chat_with_db_execute":return n.zM;case"chat_excel":return n.DL;case"chat_with_db_qa":case"chat_dba":return n.RD;case"chat_dashboard":return n.In;case"chat_agent":return n.si;case"chat_normal":return n.O7;default:return}},[o]);return(0,l.jsx)(c.Z,{className:"w-".concat(t||7," h-").concat(a||7),component:r()})}},70065:function(e,t,a){"use strict";var l=a(91321);let n=(0,l.Z)({scriptUrl:"//at.alicdn.com/t/a/font_4440880_ljyggdw605.js"});t.Z=n},91467:function(e,t,a){"use strict";a.d(t,{TH:function(){return m},ZS:function(){return x}});var l=a(85893),n=a(89705),c=a(83062),s=a(96074),o=a(45030),r=a(85418),i=a(93967),d=a.n(i),p=a(36609),u=a(25675),h=a.n(u);a(67294);var _=a(48218);a(11873);let m=e=>{let{onClick:t,Icon:a="/pictures/card_chat.png",text:n=(0,p.t)("start_chat")}=e;return"string"==typeof a&&(a=(0,l.jsx)(h(),{src:a,alt:a,width:17,height:15})),(0,l.jsxs)("div",{className:"flex items-center gap-1 text-default",onClick:e=>{e.stopPropagation(),t&&t()},children:[a,(0,l.jsx)("span",{children:n})]})},x=e=>{let{menu:t}=e;return(0,l.jsx)(r.Z,{menu:t,getPopupContainer:e=>e.parentNode,placement:"bottomRight",autoAdjustOverflow:!1,children:(0,l.jsx)(n.Z,{className:"p-2 hover:bg-white hover:dark:bg-black rounded-md"})})};t.ZP=e=>{let{RightTop:t,Tags:a,LeftBottom:n,RightBottom:r,onClick:i,rightTopHover:p=!0,logo:u,name:m,description:x,className:f,scene:g,code:b}=e;return"string"==typeof x&&(x=(0,l.jsx)("p",{className:"line-clamp-2 relative bottom-4 text-ellipsis min-h-[42px] text-sm text-[#525964] dark:text-[rgba(255,255,255,0.65)]",children:x})),(0,l.jsx)("div",{className:d()("hover-underline-gradient flex justify-center mt-6 relative group w-1/3 px-2 mb-6",f),children:(0,l.jsxs)("div",{onClick:i,className:"backdrop-filter backdrop-blur-lg cursor-pointer  bg-white bg-opacity-70 border-2 border-white rounded-lg shadow p-4 relative w-full h-full dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",children:[(0,l.jsxs)("div",{className:"flex items-end relative bottom-8 justify-between w-full",children:[(0,l.jsxs)("div",{className:"flex items-end gap-4 w-11/12  flex-1",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm w-14 h-14 flex items-center p-3",children:g?(0,l.jsx)(_.Z,{scene:g,width:14,height:14}):u&&(0,l.jsx)(h(),{src:u,width:44,height:44,alt:m,className:"w-8 min-w-8 rounded-full max-w-none"})}),(0,l.jsx)("div",{className:"flex-1",children:m.length>6?(0,l.jsx)(c.Z,{title:m,children:(0,l.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:m})}):(0,l.jsx)("span",{className:"line-clamp-1 text-ellipsis font-semibold text-base",style:{maxWidth:"60%"},children:m})})]}),(0,l.jsx)("span",{className:d()("shrink-0",{hidden:p,"group-hover:block":p}),onClick:e=>{e.stopPropagation()},children:t})]}),x,(0,l.jsx)("div",{className:"relative bottom-2",children:a}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("div",{children:n}),(0,l.jsx)("div",{children:r})]}),b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z,{className:"my-3"}),(0,l.jsx)(o.default.Text,{copyable:!0,className:"absolute bottom-1 right-4 text-xs text-gray-500",children:b})]})]})})}},57464:function(e,t,a){"use strict";a.r(t);var l=a(85893),n=a(80169),c=a(90598),s=a(75750),o=a(68795),r=a(24969),i=a(65654),d=a(45360),p=a(28459),u=a(92783),h=a(25278),_=a(14726),m=a(74330),x=a(93967),f=a.n(x),g=a(11163),b=a(67294),v=a(67421),j=a(22575),w=a(41468),N=a(70065),k=a(91467),y=a(30381),Z=a.n(y);t.default=()=>{let e=(0,g.useRouter)(),{t}=(0,v.$G)(),{setAgent:a,setCurrentDialogInfo:x,model:y}=(0,b.useContext)(w.p),[C,S]=(0,b.useState)("all"),[P,E]=(0,b.useState)({app_list:[],total_count:0}),I=[{value:"recommend",label:t("recommend_apps")},{value:"all",label:t("all_apps")},{value:"collected",label:t("my_collected_apps")}],R=e=>(0,n.Vx)((0,n.yk)({page_no:"1",page_size:"12",...e})),W=e=>(0,n.Vx)((0,n.mW)({page_no:"1",page_size:"12",...e})),{run:M,loading:O}=(0,i.Z)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"12";switch(C){case"recommend":return await W({page_no:t,page_size:a});case"collected":return await R({is_collected:"true",ignore_user:"true",published:"true",need_owner_info:"true",app_name:e,page_no:t,page_size:a});case"all":return await R({ignore_user:"true",published:"true",need_owner_info:"true",app_name:e,page_no:t,page_size:a});default:return[]}},{manual:!0,onSuccess:e=>{let[t,a]=e;if("recommend"===C){if(Array.isArray(a))return E({app_list:a,total_count:a.length})}else if("app_list"in a){var l,n;let e=null==a?void 0:null===(l=a.app_list)||void 0===l?void 0:null===(n=l[0])||void 0===n?void 0:n.app_code,t=e?P.app_list.findIndex(t=>t.app_code===e):-1;-1!==t?E({app_list:P.app_list.toSpliced(12*Math.floor(t/12),12,...a.app_list)||[],total_count:(null==a?void 0:a.total_count)||0}):(console.log("concat"),E({app_list:P.app_list.concat(null==a?void 0:a.app_list)||[],total_count:(null==a?void 0:a.total_count)||0}))}},debounceWait:500}),B=async e=>{E({app_list:[],total_count:0}),M(e.target.value)},T=async e=>{let[a]=await (0,n.Vx)("true"===e.is_collected?(0,n.gD)({app_code:e.app_code}):(0,n.mo)({app_code:e.app_code})),l=P.app_list.findIndex(t=>t.app_code===e.app_code);a||("true"===e.is_collected?d.ZP.success(t("cancel_success")):d.ZP.success(t("collect_success")),M("",(Math.floor(l/12)+1).toString()))};function V(e){let{index:t}=e;return!!P.app_list[t]}let z=o=>{var r;let{columnIndex:i,key:d,rowIndex:p,style:u}=o,h=3*p+i;if(!V({index:h}))return null;let _=P.app_list[h];return(0,l.jsx)("div",{style:u,children:(0,l.jsx)(k.ZP,{name:_.app_name,description:_.app_describe,className:"w-11/12",RightTop:"true"===_.is_collected?(0,l.jsx)(c.Z,{onClick:()=>T(_),style:{height:"21px",cursor:"pointer",color:"#f9c533"}}):(0,l.jsx)(s.Z,{onClick:()=>T(_),style:{height:"21px",cursor:"pointer"}}),onClick:async()=>{if("native_app"===_.team_mode){let{chat_scene:t=""}=_.team_context,[,a]=await (0,n.Vx)((0,n.sW)({chat_mode:t}));a&&(null==x||x({chat_scene:a.chat_mode,app_code:_.app_code}),localStorage.setItem("cur_dialog_info",JSON.stringify({chat_scene:a.chat_mode,app_code:_.app_code})),e.push("/chat?scene=".concat(t,"&id=").concat(a.conv_uid).concat(y?"&model=".concat(y):"")))}else{let[,t]=await (0,n.Vx)((0,n.sW)({chat_mode:"chat_agent"}));t&&(null==x||x({chat_scene:t.chat_mode,app_code:_.app_code}),localStorage.setItem("cur_dialog_info",JSON.stringify({chat_scene:t.chat_mode,app_code:_.app_code})),null==a||a(_.app_code),e.push("/chat/?scene=chat_agent&id=".concat(t.conv_uid).concat(y?"&model=".concat(y):"")))}},LeftBottom:(0,l.jsx)("div",{className:"flex gap-8 items-center text-[#878c93] text-sm dark:text-stone-200",children:"recommend"===C?(0,l.jsxs)("div",{className:"flex items-start gap-1",children:[(0,l.jsx)(N.Z,{type:"icon-hot",className:"text-lg"}),(0,l.jsx)("span",{className:"text-[#878c93]",children:_.hot_value})]}):(0,l.jsx)("div",{children:Z()(null==_?void 0:_.updated_at).fromNow()+" "+t("update")})}),scene:(null==_?void 0:null===(r=_.team_context)||void 0===r?void 0:r.chat_scene)||"chat_agent"},_.app_code)},d)};return(0,b.useEffect)(()=>{E({app_list:[],total_count:0})},[C]),(0,b.useEffect)(()=>{M()},[C,M]),(0,l.jsx)("div",{className:"flex flex-col h-full w-full backdrop-filter backdrop-blur dark:bg-gradient-dark bg-gradient-light  p-10 pt-12 ",id:"home-container",children:(0,l.jsx)(p.ZP,{theme:{components:{Button:{defaultBorderColor:"white"},Segmented:{itemSelectedBg:"#2867f5",itemSelectedColor:"white"}}},children:(0,l.jsxs)("div",{className:"flex flex-col h-full mt-4 overflow-hidden relative",style:{paddingBottom:P.total_count>12?45:20},children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(u.Z,{className:"h-10 backdrop-filter backdrop-blur-lg bg-white bg-opacity-30 border border-white rounded-lg shadow p-1 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",options:I,onChange:e=>S(e),value:C}),(0,l.jsx)(h.default,{variant:"filled",prefix:(0,l.jsx)(o.Z,{}),placeholder:t("please_enter_the_keywords"),onChange:B,onPressEnter:B,allowClear:!0,className:f()("w-[230px] h-[40px] border-1 border-white backdrop-filter backdrop-blur-lg bg-white bg-opacity-30 dark:border-[#6f7f95] dark:bg-[#6f7f95] dark:bg-opacity-60",{hidden:"recommend"===C})})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsx)(_.ZP,{className:"border-none text-white bg-button-gradient",icon:(0,l.jsx)(r.Z,{}),onClick:()=>{localStorage.removeItem("new_app_info"),e.push("/construct/app?openModal=true")},children:t("create_app")})})]}),O&&!P.app_list.length?(0,l.jsx)(m.Z,{size:"large",className:"flex items-center justify-center h-full",spinning:O}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.b2,{isRowLoaded:V,loadMoreRows:function(e){let{startIndex:t,stopIndex:a}=e,l=Math.ceil(t/12)+1;return console.log(t,a,l),M("",l.toString())},rowCount:P.total_count,children:e=>{let{onRowsRendered:t,registerChild:a}=e;return(0,l.jsx)(j.qj,{children:e=>{let{width:n,height:c}=e;return(0,l.jsx)(j.rj,{ref:a,onSectionRendered:e=>{let{rowStartIndex:a,rowStopIndex:l}=e;t({startIndex:3*a,stopIndex:3*l+2})},cellRenderer:z,columnWidth:n/3,columnCount:3,height:c,rowHeight:200,rowCount:P.total_count,width:n})}})}}),O&&P.app_list.length&&(0,l.jsx)(m.Z,{className:"flex items-end justify-center h-full",spinning:O})]})]})})})}},11873:function(){}},function(e){e.O(0,[2913,3791,5278,8791,4330,5418,5030,7558,8156,9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);